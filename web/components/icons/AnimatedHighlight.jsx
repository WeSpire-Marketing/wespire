import { useEffect, useRef } from 'react'
import { motion, useAnimationControls, useInView } from 'framer-motion'

export default function AnimatedHighlights({ className = '', color = '#DF6F30' }) {
  const ref = useRef(null)
  const isInView = useInView(ref)
  const controls = useAnimationControls()

  useEffect(() => {
    if (isInView) {
      controls.start({ pathLength: 1, opacity: 1 })
    }
  }, [controls, isInView])

  return (
    <svg
      className={className}
      width="59"
      height="50"
      viewBox="0 0 59 50"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      ref={ref}
    >
      <motion.path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M48.5816 0.284124C48.4388 0.435959 48.1713 1.04204 47.9869 1.63111C47.3167 3.77394 47.0378 4.73208 46.8866 5.41124C46.8018 5.7924 46.6559 6.38387 46.5623 6.72572C46.4687 7.06744 46.3921 7.50077 46.3921 7.68877C46.3921 8.0664 46.2031 8.18371 45.5969 8.18245C44.6754 8.18056 39.4747 9.00854 39.0034 9.23232C38.3112 9.56081 38.1555 10.5886 38.7079 11.1821C38.9972 11.4928 39.1958 11.5759 39.8068 11.6418C41.0721 11.7782 42.4814 12.0449 44.1081 12.4558C44.6824 12.6008 45.3161 12.7195 45.5166 12.7195C45.9476 12.7195 46.141 13.0089 46.141 13.6539C46.141 14.2584 46.3437 15.6129 46.7175 17.5077C47.2353 20.1312 47.2643 20.2259 47.6653 20.6113C47.9833 20.9168 48.1408 20.9713 48.6829 20.9631C49.2458 20.9546 49.3655 20.9038 49.6616 20.548C49.9593 20.19 50.0089 19.9964 50.0844 18.8971C50.1314 18.2121 50.2749 17.0097 50.4034 16.2251C50.5317 15.4406 50.6748 14.4725 50.7213 14.0739C50.8278 13.1597 51.0119 12.9715 51.7994 12.9715C52.1388 12.9715 52.6575 12.9166 52.9521 12.8494C53.2466 12.7822 53.968 12.6348 54.5551 12.5217C56.1563 12.2132 57.789 11.761 58.144 11.5276C58.7329 11.1405 58.8428 10.4503 58.4464 9.62873C58.1257 8.96393 57.7802 8.85305 55.6853 8.74229C54.8219 8.69668 53.4939 8.59474 52.7341 8.51586L51.3527 8.37234L51.2736 7.42731C51.2301 6.90754 51.1211 5.19111 51.0313 3.61303C50.8707 0.78978 50.8627 0.73774 50.534 0.368422C50.239 0.0369046 50.1207 -0.0060637 49.5206 0.000614524C48.9905 0.00666273 48.784 0.0689089 48.5816 0.284124ZM15.4985 14.5783C15.2124 14.7216 14.9602 14.9949 14.7764 15.3608C14.5216 15.8678 14.4938 16.1048 14.4938 17.7782C14.4938 21.2526 13.4462 24.6106 11.7937 26.4327C11.2532 27.0287 9.94302 28.0107 9.53324 28.1269C9.39509 28.1661 8.97125 28.3087 8.59136 28.4438C7.25313 28.9199 6.24834 29.0331 3.35187 29.0352C0.652946 29.037 0.552102 29.0461 0.287245 29.3117C0.0894507 29.5102 0.00995516 29.7495 0.00116429 30.1731C-0.0091336 30.6653 0.0446161 30.8079 0.334715 31.0583C0.524975 31.2226 0.892308 31.3922 1.15101 31.4353C1.40971 31.4784 1.78534 31.566 1.98552 31.6298C2.18582 31.6938 2.61972 31.7461 2.94988 31.7461C3.55707 31.7461 3.94475 31.967 3.94475 32.313C3.94475 32.5639 4.4653 32.9322 5.09158 33.1244C8.54163 34.1828 10.7396 35.2612 12.2793 36.6505C13.1038 37.3947 14.1998 39.177 14.5321 40.3144C14.6029 40.557 14.694 42.4282 14.7344 44.4726C14.8198 48.8023 14.825 48.8224 15.994 49.4182C16.7688 49.8131 17.1925 49.8477 17.8554 49.5697C19.0156 49.0833 19.2657 48.5394 19.2667 46.5007C19.2674 45.3391 19.3179 44.8168 19.4551 44.5527C19.5584 44.3541 19.6427 44.1238 19.6427 44.0408C19.6427 43.8139 20.3542 42.3107 21.0784 41.0075C22.0673 39.2279 23.3795 37.9676 25.5536 36.7091C27.0792 35.8259 29.0362 34.9036 30.3353 34.4552C31.5207 34.0462 32.0071 33.8344 32.8513 33.3599C33.4206 33.0397 34.2321 32.1793 34.4844 31.6283C34.9856 30.5339 34.569 29.3066 33.4266 28.5116C32.9477 28.1785 32.8063 28.1498 31.2704 28.0756C29.6692 27.9983 29.3682 27.951 27.9313 27.5515C26.7666 27.2277 26.5034 27.1189 24.4644 26.118C22.2614 25.0367 20.9324 23.6441 20.2152 21.6658C20.0268 21.146 19.7646 20.4373 19.6327 20.0907C19.5007 19.7442 19.3298 19.1489 19.2528 18.7677C18.6639 15.8509 18.5125 15.392 17.9705 14.8825C17.4125 14.358 16.2285 14.2123 15.4985 14.5783ZM19.3431 28.3097C20.4518 29.4183 21.4218 30.1028 23.2123 31.0395C24.7595 31.8488 24.7627 31.8524 24.1955 32.1548C22.8861 32.8531 20.9265 34.2595 20.025 35.1483C19.5597 35.6069 18.3743 37.0364 18.0102 37.5779C17.8375 37.8345 17.6673 38.045 17.6319 38.0455C17.5965 38.046 17.277 37.607 16.922 37.0698C16.328 36.1714 15.1564 34.8615 14.3304 34.1726C13.8233 33.7496 12.0175 32.6345 11.4302 32.3816C11.1466 32.2595 10.639 32.0336 10.3021 31.8795L9.68946 31.5992L10.0866 31.3569C10.305 31.2237 10.9479 30.8817 11.5155 30.597C12.5791 30.0634 14.1079 28.9722 14.6343 28.3707C14.7988 28.1827 15.2115 27.6185 15.5512 27.1169C15.8909 26.6151 16.3562 25.9995 16.5852 25.7487L17.0015 25.2927L17.6539 26.2828C18.0128 26.8274 18.773 27.7396 19.3431 28.3097Z"
        fill={color}
        initial={{ pathLength: 0, opacity: 0 }}
        animate={controls}
        transition={{ duration: 1.5, yo: 'spring', delay: 1 }}
      />
    </svg>
  )
}
